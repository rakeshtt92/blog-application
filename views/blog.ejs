<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <style>
            pre {
                background-color: #f8f9fa;
                padding: 1rem;
                border-radius: 5px;
                font-family: 'Courier New', Courier, monospace;
            }
        </style>
</head>
<title>Blog</title>

</head>

<body>
    <%- include('./partials/nav') %>
        <div class="container mt-5">
            <h1>
                <%= blog?.title %>
            </h1>
            <img src="<%= blog?.coverImageUrl %>" width="550px" />
            <pre class="mt-3" style="white-space: pre-wrap; word-break: break-word; overflow-x: auto;">
                <%= blog.content %>
            </pre>
        </div>

        <div class="container mt-5">
            <img src="<%= blog.createdBy.profilePicture %>" width="100px" />
            <%= blog.createdBy.fullName %>
        </div>


        <div class="container mt-1">
            <h2>Comments (<%= comments.length %>)</h2>
            <% if (locals.user) { %>
                <form action="/blog/comment/<%= blog._id %>" method="POST">
                    <div class="mb-3">
                        <textarea class="form-control" id="comment" name="comment" placeholder="Add a comment" rows="3"
                            required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>

                <% } %>
                    <div>
                        <% comments.forEach(comment=> { %>

                            <div class="container mt-1">
                                <img src="<%= comment.createdBy.profilePicture %>" width="100px" />
                                <strong>
                                    <%= comment.createdBy.fullName %>
                                </strong>
                                <pre><%= comment.content %></pre>
                            </div>
                            <% }) %>
                    </div>
        </div>

        <%- include('./partials/scripts') %>
</body>

</html>